# Get the git root directory dynamically
GIT_ROOT=$(git rev-parse --show-toplevel)

# Remove the .gitignore in the native app folder relative to the git root
# Get the git root directory dynamically
GIT_ROOT=$(git rev-parse --show-toplevel)
TARGET="$GIT_ROOT/apps/native/.gitignore"

# If the file exists on disk
if [ -f "$TARGET" ]; then
  echo "üóëÔ∏è Removing $TARGET"
  rm -f "$TARGET"
fi

# If the file is tracked by git, stage its removal
if git ls-files --error-unmatch "$TARGET" > /dev/null 2>&1; then
  git rm --cached "$TARGET"
  echo "‚úÖ Staged removal of $TARGET"
else
  echo "‚ÑπÔ∏è $TARGET not tracked by git, nothing to stage"
fi

#pnpm encrypt:all

git add "$GIT_ROOT/apps/native/.env"
git add "$GIT_ROOT/apps/server/.env"
git add "$GIT_ROOT/apps/server/.env.docker"
git add "$GIT_ROOT/apps/web/.env"

# lint-staged
lint-staged
